"use strict";(self.webpackChunkstock_tracker_app=self.webpackChunkstock_tracker_app||[]).push([[154],{3154:(Q,y,a)=>{a.r(y),a.d(y,{StockModule:()=>d});var c=a(6895),u=a(6264),A=a(5315),r=a(4006),b=a(4128),O=a(4004);class Z{constructor(e,o){this.quote=e,this.searchResult=o}}var t=a(4650),q=a(529);class m{constructor(e){this.http=e,this.API_KEY="bu4f8kn48v6uehqi3cqg",this.BASE_URL="https://finnhub.io/api/v1"}getQuote(e){return this.http.get(`${this.BASE_URL}/quote`,{params:{token:this.API_KEY,symbol:e}})}search(e){return this.http.get(`${this.BASE_URL}/search`,{params:{token:this.API_KEY,q:e}})}getInsiderSentiment(e){let o=new Date,s=o.toISOString().split("T")[0],_=new Date(o.setMonth(o.getMonth()-3)).toISOString().split("T")[0];return this.http.get(`${this.BASE_URL}/stock/insider-sentiment`,{params:{token:this.API_KEY,symbol:e,from:_,to:s}})}}m.\u0275fac=function(e){return new(e||m)(t.LFG(q.eN))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});var T=a(2569),i=a(3546),k=a(4859),v=a(7676),M=a(4144),C=a(7392);function I(n,e){1&n&&(t.TgZ(0,"mat-icon",7),t._uU(1,"trending_up"),t.qZA())}function U(n,e){1&n&&(t.TgZ(0,"mat-icon",8),t._uU(1,"trending_down"),t.qZA())}const D=function(n){return["/sentiment",n]},P=function(n){return{name:n}};class g{constructor(){this.data=new Z,this.removeSymbolEvent=new t.vpe}removeSymbol(e){this.removeSymbolEvent.emit(e)}}function x(n,e){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.hij(" ",o.errorMessage," ")}}function w(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"app-stock-item",6),t.NdJ("removeSymbolEvent",function(p){t.CHM(o);const _=t.oxw();return t.KtG(_.removeSymbol(p))}),t.qZA()}2&n&&t.Q6J("data",e.$implicit)}g.\u0275fac=function(e){return new(e||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-stock-item"]],inputs:{data:"data"},outputs:{removeSymbolEvent:"removeSymbolEvent"},decls:35,vars:20,consts:[[1,"title"],[1,"close",3,"id","click"],[1,"wrapper"],[1,"stock-title"],["color","success","class","trending-icon",4,"ngIf"],["color","warn","class","trending-icon",4,"ngIf"],["mat-button","",3,"id","routerLink","queryParams"],["color","success",1,"trending-icon"],["color","warn",1,"trending-icon"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-header",0)(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-icon",1),t.NdJ("click",function(){return o.removeSymbol(o.data.searchResult.symbol)}),t.ALo(5,"uppercase"),t._uU(6,"close"),t.qZA()(),t.TgZ(7,"mat-card-content")(8,"main")(9,"div",2)(10,"div",3),t._uU(11,"Change today:"),t.qZA(),t.TgZ(12,"div",3),t._uU(13,"Opening price:"),t.qZA(),t.TgZ(14,"div"),t._uU(15),t.qZA(),t.TgZ(16,"div"),t._uU(17),t.qZA()(),t.TgZ(18,"div",2)(19,"div",3),t._uU(20,"Current price:"),t.qZA(),t.TgZ(21,"div",3),t._uU(22,"High price:"),t.qZA(),t.TgZ(23,"div"),t._uU(24),t.qZA(),t.TgZ(25,"div"),t._uU(26),t.qZA()()(),t.TgZ(27,"section"),t.YNc(28,I,2,0,"mat-icon",4),t.YNc(29,U,2,0,"mat-icon",5),t.qZA()(),t.TgZ(30,"mat-card-actions")(31,"div")(32,"button",6),t.ALo(33,"uppercase"),t._uU(34," See sentiment details "),t.qZA()()()()),2&e&&(t.xp6(3),t.AsE("",null==o.data.searchResult?null:o.data.searchResult.description," (",null==o.data.searchResult?null:o.data.searchResult.symbol,")"),t.xp6(1),t.s9C("id","remove"+t.lcZ(5,12,o.data.searchResult.symbol)),t.xp6(11),t.Oqu(o.data.quote.d?o.data.quote.d+"%":"No data found"),t.xp6(2),t.Oqu(o.data.quote.o?"$"+o.data.quote.o:"No data found"),t.xp6(7),t.Oqu(o.data.quote.c?"$"+o.data.quote.c:"No data found"),t.xp6(2),t.Oqu(o.data.quote.h?"$"+o.data.quote.h:"No data found"),t.xp6(2),t.Q6J("ngIf",o.data.quote.d>0),t.xp6(1),t.Q6J("ngIf",o.data.quote.d<0),t.xp6(3),t.s9C("id","sentiment"+t.lcZ(33,14,o.data.searchResult.symbol)),t.Q6J("routerLink",t.VKq(16,D,o.data.searchResult.symbol))("queryParams",t.VKq(18,P,o.data.searchResult.description)))},dependencies:[c.O5,i.a8,i.hq,i.dn,i.dk,i.n5,k.lW,C.Hw,u.rH,c.gd],styles:["mat-card-actions[_ngcontent-%COMP%]{display:inline!important}mat-card-actions[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{float:right}mat-card-content[_ngcontent-%COMP%]{padding:10px 16px 0}main[_ngcontent-%COMP%]{width:75%;display:inline-block}section[_ngcontent-%COMP%]{width:25%;display:inline-block}.wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,2fr)}.close[_ngcontent-%COMP%]{position:absolute;right:20px;top:20px;color:#000;cursor:pointer}.stock-title[_ngcontent-%COMP%]{font-weight:700}.title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;color:#673ab7}"]});class h{constructor(e,o,s){this.formBuilder=e,this.stockService=o,this.loadingService=s,this.stockData=new Array,this.localStorageStockData="stockData",this.errorMessage="",this.stockForm=this.formBuilder.group({symbol:["",[r.kI.required,r.kI.minLength(1),r.kI.maxLength(5),this.noWhitespaceValidator]]})}ngOnInit(){this.getStockData()}getStockData(){let e=localStorage.getItem(this.localStorageStockData);e&&(this.stockData=JSON.parse(e))}noWhitespaceValidator(e){return e.value&&e.value.match(/\s/g)?{whitespace:!0}:null}searchStock(){let e=this.stockForm.value.symbol?.toUpperCase();this.validateStockExist(e)||(this.errorMessage="",this.loadingService.setLoading(!0),(0,b.D)([this.stockService.getQuote(e),this.stockService.search(e)]).pipe((0,O.U)(([o,s])=>{s.count>0?(this.stockData=[...this.stockData,new Z(o,s.result[0])],localStorage.setItem(this.localStorageStockData,JSON.stringify(this.stockData)),this.stockForm.reset()):this.errorMessage="No Data found",this.loadingService.setLoading(!1)})).subscribe())}validateStockExist(e){return this.errorMessage="Symbol is repeated",!!this.stockData.find(o=>o.searchResult?.symbol===e.toUpperCase())}removeSymbol(e){let o=this.stockData.findIndex(s=>s.searchResult?.symbol===e);o>=0&&(this.stockData.splice(o,1),localStorage.setItem(this.localStorageStockData,JSON.stringify(this.stockData)))}}h.\u0275fac=function(e){return new(e||h)(t.Y36(r.qu),t.Y36(m),t.Y36(T.b))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-stock-search"]],decls:15,vars:4,consts:[[3,"formGroup"],["matInput","","id","stockInput","formControlName","symbol","placeholder","1-5 char no whitespace"],["mat-raised-button","","color","primary","id","trackBtn",3,"disabled","click"],[4,"ngIf"],[1,"wrapper"],["class","box",3,"data","removeSymbolEvent",4,"ngFor","ngForOf"],[1,"box",3,"data","removeSymbolEvent"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-title"),t._uU(2,"STOCK TRACKER"),t.qZA(),t.TgZ(3,"mat-card-content")(4,"span"),t._uU(5,"Enter the symbol of a stock to track (i.e. AAPL, TSLA, GOOGL)"),t.qZA(),t.TgZ(6,"form",0)(7,"mat-form-field"),t._UZ(8,"input",1),t.qZA(),t.TgZ(9,"button",2),t.NdJ("click",function(){return o.searchStock()}),t._uU(10,"Track store"),t.qZA()(),t.YNc(11,x,2,1,"mat-error",3),t.qZA()(),t.TgZ(12,"main")(13,"div",4),t.YNc(14,w,1,1,"app-stock-item",5),t.qZA()()),2&e&&(t.xp6(6),t.Q6J("formGroup",o.stockForm),t.xp6(3),t.Q6J("disabled",!o.stockForm.valid),t.xp6(2),t.Q6J("ngIf",o.errorMessage),t.xp6(3),t.Q6J("ngForOf",o.stockData))},dependencies:[c.sg,c.O5,i.a8,i.dn,i.n5,k.lW,v.KE,v.TO,M.Nt,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,g],styles:["mat-card[_ngcontent-%COMP%]{width:40%;text-align:center;margin:auto auto 30px}mat-card-title[_ngcontent-%COMP%]{font-size:28px;color:#673ab7;margin-bottom:15px}form[_ngcontent-%COMP%]{margin-top:15px}.wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:31% 31% 31%;grid-gap:33px}mat-form-field[_ngcontent-%COMP%]{margin-right:20px}"]});class R{constructor(e,o){this.data=e,this.symbol=o}}class f{transform(e){let o=new Date;return o.setMonth(e-1),o.toLocaleString("en-US",{month:"long"}).toUpperCase()}}function J(n,e){1&n&&(t.TgZ(0,"mat-icon",9),t._uU(1,"trending_up"),t.qZA())}function N(n,e){1&n&&(t.TgZ(0,"mat-icon",10),t._uU(1,"trending_down"),t.qZA())}function E(n,e){if(1&n&&(t.TgZ(0,"div",4)(1,"main")(2,"div",5)(3,"div"),t._uU(4),t.ALo(5,"dateTransform"),t.qZA(),t.TgZ(6,"div",6),t._uU(7),t.qZA(),t.TgZ(8,"div",6),t._uU(9),t.qZA()()(),t.TgZ(10,"section"),t.YNc(11,J,2,0,"mat-icon",7),t.YNc(12,N,2,0,"mat-icon",8),t.qZA()()),2&n){const o=e.$implicit;t.xp6(4),t.Oqu(t.lcZ(5,5,o.month)),t.xp6(3),t.hij("Change: ",o.change,""),t.xp6(2),t.hij("MSPR: ",o.mspr,""),t.xp6(2),t.Q6J("ngIf",o.change>0),t.xp6(1),t.Q6J("ngIf",o.change<0)}}function F(n,e){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.hij(" ",o.errorMessage," ")}}f.\u0275fac=function(e){return new(e||f)},f.\u0275pipe=t.Yjl({name:"dateTransform",type:f,pure:!0});class S{constructor(e,o,s,p){this.route=e,this.router=o,this.stockService=s,this.loadingService=p,this.sentimentResponse=new R,this.symbol="",this.name="",this.localStorageStockData="stockData",this.errorMessage=""}ngOnInit(){if(this.symbol=this.route.snapshot.paramMap.get("symbol")||"",this.route.queryParams.subscribe(e=>{this.name=e.name}),!this.name){let e=localStorage.getItem(this.localStorageStockData)||"",o=new Array;e&&(o=JSON.parse(e));let s=o.find(p=>p.searchResult.symbol===this.symbol);this.name=s.searchResult.description}this.loadingService.setLoading(!0),this.errorMessage="",this.stockService.getInsiderSentiment(this.symbol).subscribe(e=>{this.sentimentResponse=e,this.loadingService.setLoading(!1)},e=>{this.loadingService.setLoading(!1),this.errorMessage="No Data found"})}goHome(){this.router.navigate(["./"])}}S.\u0275fac=function(e){return new(e||S)(t.Y36(u.gz),t.Y36(u.F0),t.Y36(m),t.Y36(T.b))},S.\u0275cmp=t.Xpm({type:S,selectors:[["app-stock-sentiment"]],decls:12,vars:4,consts:[[1,"title"],["class","sentiment-content",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-button","","id","backBtn",3,"click"],[1,"sentiment-content"],[1,"wrapper"],[1,"stock-title"],["color","success","class","trending-icon",4,"ngIf"],["color","warn","class","trending-icon",4,"ngIf"],["color","success",1,"trending-icon"],["color","warn",1,"trending-icon"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-header",0)(2,"mat-card-title"),t._uU(3),t.qZA()(),t.TgZ(4,"mat-card-content"),t.YNc(5,E,13,7,"div",1),t.YNc(6,F,2,1,"mat-error",2),t.qZA()(),t.TgZ(7,"div")(8,"button",3),t.NdJ("click",function(){return o.goHome()}),t.TgZ(9,"mat-icon"),t._uU(10,"chevron_left"),t.qZA(),t._uU(11," Back to list of stocks "),t.qZA()()),2&e&&(t.xp6(3),t.AsE("",o.name," (",o.sentimentResponse.symbol,")"),t.xp6(2),t.Q6J("ngForOf",o.sentimentResponse.data),t.xp6(1),t.Q6J("ngIf",o.errorMessage))},dependencies:[c.sg,c.O5,i.a8,i.dn,i.dk,i.n5,k.lW,v.TO,C.Hw,f],styles:["main[_ngcontent-%COMP%]{width:75%;display:inline-block}section[_ngcontent-%COMP%]{width:25%;display:inline-block}.sentiment-content[_ngcontent-%COMP%]{width:33%;display:inline-block}mat-card[_ngcontent-%COMP%]{margin-top:20px}mat-card-content[_ngcontent-%COMP%]{margin-bottom:20px;margin-top:15px}"]});const L=[{path:"",component:h},{path:"sentiment/:symbol",component:S,canActivate:[A.V]}];class l{}l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[u.Bz.forChild(L),u.Bz]});var Y=a(2805);class d{}d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[c.ez,Y.m,l]})}}]);